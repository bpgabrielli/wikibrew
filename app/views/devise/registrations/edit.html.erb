<body>
  <div class="container">
  <h2><%= current_user.name %>'s account</h2>

        <% if current_user.role == "free" %>
          <p><%= link_to "Upgrade to Premium", new_charge_path, class: 'btn btn-success btn-large' %></p>
        <% else %>
          <p><%= button_to "Downgrade account", user_path(@user, user: {role: "free"}), method: :patch, class: 'btn btn-info' %></p>
        <% end %>

  <div class="row">
    <div class="col-md-8">
      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :patch }) do |f| %>
        <%= devise_error_messages! %>
        <div class="form-group">
          <%= f.label :name %>
          <%= f.text_field :name, class: 'form-control', placeholder: "Enter name", autofocus: true %>
        </div>
        <div class="form-group">
          <%= f.label :email %>
          <%= f.email_field :email, class: 'form-control', placeholder: "Enter email" %>
        </div>
        <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
          <div class="form-group">
            <p>Waiting confirmation for:</p>
            <%= resource.unconfirmed_email %>
          </div>
        <% end %>
        <div class="form-group">
          <%= f.label :change_password %>
          <%= f.password_field :password, class: 'form-control', placeholder: "Enter new password" %>
        </div>
        <div class="form-group">
          <%= f.password_field :password_confirmation, class: 'form-control', placeholder: "Confirm new password" %>
        </div><br>
        <div class="form-group">
          <%= f.password_field :current_password, class: 'form-control', placeholder: "Enter password to confirm changes" %>
        </div>
        <div class="form-group">
          <%= f.submit "Update", class: 'btn btn-primary' %>
        </div>
      <% end %>

      <h3>Log out</h3>
      <div class="form-group">
          <p><%= button_to "Log out", destroy_user_session_path, method: :delete, class: 'btn btn-warning' %></p>
      </div>

      <h3>Cancel account</h3>
      <div class="form-group">
          <p><%= button_to "Cancel account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: 'btn btn-danger' %></p>
      </div>
    </div>
  </div>
 </div>
</body>